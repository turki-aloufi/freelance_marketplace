<main class="p-4 sm:p-6 md:p-8 max-w-screen-xl mx-auto">
  <!-- title -->
  <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-1">My Working Projects</h1>
  <p class="text-base sm:text-lg text-gray-500 mb-4">Browse your current projects</p>

  <!-- filterProjects -->
  <div class="mb-6 w-full">
    <select [(ngModel)]="selectedStatus" (change)="filterProjects()" 
      class="w-full bg-white border border-gray-300 rounded-md p-2 sm:px-4 sm:py-2">
      <option value="">All</option>
      <option value="In Progress">In Progress</option>
      <option value="Completed">Completed</option>
    </select>
  </div>

  <!-- No projects -->
  <div *ngIf="filteredProjects.length === 0 && !loading" class="text-center text-lg text-gray-500 mt-6">
    No projects found.
  </div>

  <!-- loading -->
  <div *ngIf="loading==true" class="flex justify-center items-center my-10">
    <i class="fas fa-spinner fa-spin text-yellow-500 text-5xl"></i>
  </div>

  <!-- Projects list -->
  <div *ngIf="filteredProjects.length > 0" class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div *ngFor="let project of filteredProjects" class="project-card flex flex-col">
      <div class="flex-grow">
        <div class="flex flex-col md:flex-row md:justify-between md:items-start mb-3">
          <h2 class="project-title">{{ project.title }}</h2>
          <span class="status-badge" [ngClass]="{
            'status-completed': project.status === 'Completed',
            'status-inprogress': project.status === 'In Progress'
          }">
            {{ project.status }}
          </span>
        </div>

        <p class="project-overview">{{ project.overview }}</p>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 mb-3">
          <p class="project-detail"><span>Budget:</span> ${{ project.budget }}</p>
          <p class="project-detail"><span>Deadline:</span> {{ project.deadline }}</p>
          <p class="project-detail"><span>Owner:</span> {{ project.postedBy }}</p>
        </div>

        <hr class="divider" />

        <div class="mt-4 flex flex-wrap justify-between items-center gap-4">
          <div *ngIf="project.skills?.length" class="skills-section">
            <p class="skills-title mb-1">Skills:</p>
            <div class="flex flex-wrap gap-2">
              <span *ngFor="let skill of project.skills" class="skill-chip">
                {{ skill.skill }} <span class="skill-category">({{ skill.category }})</span>
              </span>
            </div>
          </div>

          <a [routerLink]="['/project-details', project.projectId]" class="view-link whitespace-nowrap self-start">
            View
          </a>
        </div>
      </div>
    </div>
  </div>
</main>

